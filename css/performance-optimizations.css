/* Performance Optimizations for URL Notes Dashboard */

/* Use GPU acceleration for smooth animations */
.note-card {
  will-change: transform;
  transform: translateZ(0); /* Force GPU layer */
  backface-visibility: hidden;
}

/* Optimize transitions */
.note-card:hover {
  transform: translateY(-2px) translateZ(0);
  transition: transform 0.15s ease-out;
}

/* Reduce paint operations */
.note-card-content {
  contain: layout style paint;
}

/* Optimize text rendering */
.note-card-title,
.note-card-preview {
  text-rendering: optimizeSpeed;
  font-smooth: never;
  -webkit-font-smoothing: subpixel-antialiased;
}

/* Improve scrolling performance */
.dashboard-main {
  overflow-anchor: none; /* Prevent scroll anchoring issues */
}

#notesGrid {
  contain: layout style paint;
  overflow-anchor: none;
}

/* Virtual scrolling container optimizations */
.virtual-scroll-container {
  contain: strict;
  overflow-anchor: none;
}

.virtual-spacer-top,
.virtual-spacer-bottom {
  contain: size layout style paint;
  pointer-events: none;
}

/* Optimize checkbox interactions */
.note-checkbox {
  contain: layout style paint;
}

/* Reduce reflow during filtering */
.filters-bar {
  contain: layout style;
}

/* Optimize modal animations */
.modal {
  contain: layout style paint;
}

/* Performance debug panel optimizations */
#perf-debug-panel {
  contain: layout style paint;
  pointer-events: auto;
}

#perf-debug-panel * {
  pointer-events: auto;
}

/* Optimize for mobile devices */
@media (max-width: 768px) {
  .note-card {
    contain: layout style paint;
  }
  
  /* Reduce animations on mobile for better performance */
  .note-card:hover {
    transform: none;
    transition: none;
  }
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .note-card-title,
  .note-card-preview {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Reduce layout thrashing during search */
.search-input {
  contain: layout style;
}

/* Optimize tag rendering */
.tag {
  contain: layout style paint;
  display: inline-block;
  vertical-align: top;
}

/* Improve button interaction performance */
.btn-primary,
.btn-secondary {
  contain: layout style paint;
  will-change: background-color, transform;
}

/* Optimize loading states */
.loading {
  contain: layout style paint;
}

.empty-state {
  contain: layout style paint;
}

/* Prevent unnecessary repaints during typing */
input[type="text"],
input[type="search"],
textarea {
  contain: layout style;
}

/* Optimize selection UI */
.selected {
  contain: layout style paint;
}

.selection-info {
  contain: layout style paint;
}

/* Critical rendering path optimizations */
.dashboard-content {
  contain: layout style;
}

.content-header {
  contain: layout style;
}

/* Optimize domain filter dropdown */
select {
  contain: layout style paint;
}

/* Reduce paint area for note actions */
.note-actions {
  contain: layout style paint;
}

/* Optimize export/import modals */
.export-modal,
.import-modal {
  contain: layout style paint;
}

/* Performance hints for browsers */
.note-card-grid {
  content-visibility: auto;
  contain-intrinsic-size: 300px;
}

/* Optimize for reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .note-card:hover {
    transform: none;
  }
}